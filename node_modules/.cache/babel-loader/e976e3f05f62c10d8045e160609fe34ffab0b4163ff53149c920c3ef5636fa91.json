{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nimport { openModal } from \"../modal/modalSlice\";\nconst url = \"https://course-api.com/react-useReducer-cart-project\";\nconst initialState = {\n  cartItems: [],\n  amount: 4,\n  total: 0,\n  isLoading: true\n};\nexport const getCartItems = createAsyncThunk('cart/getCartItems', async (name, thunkAPI) => {\n  try {\n    console.log(\"name\", name);\n    console.log(\"thunkAPI\", thunkAPI.getState());\n    //\t\tthunkAPI.dispatch(openModal());\n    const resp = await axios(url);\n    return resp.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue('ezra error 7');\n  }\n});\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    clearCart: state => {\n      state.cartItems = [];\n      state.amount = 0;\n    },\n    removeItem: (state, action) => {\n      console.log(\"action\", action);\n      const itemId = action.payload;\n      state.cartItems = state.cartItems.filter(item => item.id !== itemId);\n    },\n    increase: (state, _ref) => {\n      let {\n        payload\n      } = _ref;\n      const cartItem = state.cartItems.find(item => item.id === payload.id);\n      cartItem.amount = cartItem.amount + 1;\n    },\n    decrease: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      const cartItem = state.cartItems.find(item => item.id === payload.id);\n      cartItem.amount = cartItem.amount - 1;\n    },\n    calculateTotals: state => {\n      let amount = 0;\n      let total = 0;\n      state.cartItems.forEach(item => {\n        amount += item.amount;\n        total += item.amount * item.price;\n      });\n      state.amount = amount;\n      state.total = total;\n    }\n  },\n  extraReducers: {\n    [getCartItems.pending]: state => {\n      state.isLoading = true;\n    },\n    [getCartItems.fulfilled]: (state, action) => {\n      console.log(action);\n      state.isLoading = false;\n      state.cartItems = action.payload;\n    },\n    [getCartItems.rejected]: (state, action) => {\n      console.log(\"error action\", action);\n      state.isLoading = false;\n    }\n  }\n});\nconsole.log(\"cartSlice = \", cartSlice);\nexport const {\n  clearCart,\n  removeItem,\n  increase,\n  decrease,\n  calculateTotals\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","openModal","url","initialState","cartItems","amount","total","isLoading","getCartItems","name","thunkAPI","console","log","getState","resp","data","error","rejectWithValue","cartSlice","reducers","clearCart","state","removeItem","action","itemId","payload","filter","item","id","increase","cartItem","find","decrease","calculateTotals","forEach","price","extraReducers","pending","fulfilled","rejected","actions","reducer"],"sources":["/home/ezra-blackfish/Documents/redux-toolkit-tutorial/starter/src/features/cart/cartSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nimport { openModal } from \"../modal/modalSlice\";\n\nconst url = \"https://course-api.com/react-useReducer-cart-project\"; \n\n\nconst initialState = {\n\tcartItems : [],\n\tamount: 4,\n\ttotal: 0,\n\tisLoading: true\n}\n\n\nexport const getCartItems = createAsyncThunk('cart/getCartItems',\n\tasync (name, thunkAPI) => {\n\ttry {\n\t\tconsole.log(\"name\", name);\n\t\tconsole.log(\"thunkAPI\", thunkAPI.getState());\n//\t\tthunkAPI.dispatch(openModal());\n\t\tconst resp = await axios(url);\n\t\treturn resp.data\n\t} catch (error) {\n\t\treturn thunkAPI.rejectWithValue('ezra error 7');\n\t}\n});\n\nconst cartSlice = createSlice({\n\tname: 'cart',\n\tinitialState,\n\treducers:{\n\t\tclearCart:(state)=> {\n\t\t\tstate.cartItems = [];\n\t\t\tstate.amount = 0;\n\t\t},\n\t\tremoveItem: (state, action) => {\n\t\t\tconsole.log(\"action\", action);\n\t\t\tconst itemId = action.payload\n\t\t\tstate.cartItems = state.cartItems.filter(\n\t\t\t\t(item) => item.id !== itemId);\n\n\t\t},\n\t\tincrease :(state, { payload }) => {\n\t\t\tconst cartItem = state.cartItems.find((item) =>item.id === payload.id)\n\t\t\tcartItem.amount = cartItem.amount + 1\n\t\t},\n\t\tdecrease :(state, { payload }) => {\n\t\t\tconst cartItem = state.cartItems.find((item) =>item.id === payload.id)\n\t\t\tcartItem.amount = cartItem.amount - 1\n\t\t},\n\t\tcalculateTotals : (state) => {\n\t\t\tlet amount = 0;\n\t\t\tlet total = 0;\n\t\t\tstate.cartItems.forEach((item) => {\n\t\t\t\tamount += item.amount\n\t\t\t\ttotal += item.amount * item.price\n\t\t\t})\n\t\t\tstate.amount = amount;\n\t\t\tstate.total = total;\n\t\t},\n\t},\n\textraReducers: {\n\t\t[getCartItems.pending]: (state) => {\n\t\t\tstate.isLoading = true;\n\t\t},\n\t\t[getCartItems.fulfilled]: (state, action) => {\n\t\t\tconsole.log(action);\n\t\t\tstate.isLoading = false;\n\t\t\tstate.cartItems = action.payload;\n\t\t},\n\t\t[getCartItems.rejected]: (state, action) => {\n\t\t\tconsole.log(\"error action\", action);\n\t\t\tstate.isLoading = false;\n\t\t},\n\n\n\t},\n})\n\nconsole.log(\"cartSlice = \", cartSlice);\n\nexport const { clearCart, removeItem, increase, decrease, calculateTotals } = cartSlice.actions;\nexport default cartSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}